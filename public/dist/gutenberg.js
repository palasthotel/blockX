!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=122)}([function(e,t){e.exports=window.wp.element},function(e,t){e.exports=window.wp.components},function(e,t){e.exports=window.React},function(e,t){e.exports=window.wp.data},function(e,t,n){var r=n(33),o="object"==typeof self&&self&&self.Object===Object&&self,c=r||o||Function("return this")();e.exports=c},function(e,t){e.exports=window.wp.apiFetch},function(e,t,n){var r=n(62),o=n(68);e.exports=function(e,t){var n=o(e,t);return r(n)?n:void 0}},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t){e.exports=window.wp.blockEditor},function(e,t){e.exports=window.wp.i18n},function(e,t,n){var r=n(52),o=n(53),c=n(54),i=n(55),a=n(56);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=c,u.prototype.has=i,u.prototype.set=a,e.exports=u},function(e,t,n){var r=n(31);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t,n){var r=n(19),o=n(64),c=n(65),i=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?o(e):c(e)}},function(e,t,n){var r=n(6)(Object,"create");e.exports=r},function(e,t,n){var r=n(78);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},function(e,t,n){var r=n(35),o=n(36);e.exports=function(e,t,n,c){var i=!n;n||(n={});for(var a=-1,u=t.length;++a<u;){var s=t[a],l=c?c(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),i?o(n,s,l):r(n,s,l)}return n}},function(e,t,n){"use strict";n.r(t),n.d(t,"STORE_NAME",(function(){return m}));var r=n(5),o=n.n(r),c=n(3);const i=()=>JSON.parse(localStorage.getItem("blockx-ssr-cache-timestamps")||"{}"),a=e=>localStorage.setItem("blockx-ssr-cache-timestamps",JSON.stringify(e)),u=(e,t=300)=>{const n=i(),r=Date.now();for(const o in e)n[o]=r+1e3*t;a(n),localStorage.setItem("blockx-ssr-cache",JSON.stringify(e))},s=()=>JSON.parse(localStorage.getItem("blockx-ssr-cache")||"{}"),l=i(),f=Date.now();for(const e in l)l[e]<f&&delete l[e],a(l);const p=Object.keys(l),d=s();for(const e in d)p.includes(e)||delete d[e];u(d);const b=(e,t)=>btoa(`${e}-${unescape(encodeURIComponent(JSON.stringify(t)))}`),v={isRequesting:!1,blocks:s(),queue:{}},y=e=>({type:"SET_IS_REQUESTING",isRequesting:e}),h={addToQueue:(e,t)=>{const n={id:e,attributes:t};return((e,t)=>({type:"ADD_TO_QUEUE",hash:e,block:t}))(b(e,t),n)},*fetchSSR(e){const t=Object(c.select)(m).getQueueMap();if(Object.keys(t).length<1)return{type:"none"};yield y(!0);const n=yield((e,t)=>({type:"SSR_FETCH",path:"/blockx/v1/ssr",data:{post_id:e,blocks:t}}))(e,t);var r,o;return yield(r=n,{type:"SET_BLOCKS",blocks:r}),yield(o=Object.keys(t),{type:"REMOVE_FROM_QUEUE",hashes:o}),y(!1)}},m="block-x",g=Object(c.createReduxStore)(m,{reducer(e=v,t){switch(t.type){case"SET_IS_REQUESTING":return{...e,isRequesting:t.isRequesting};case"SET_BLOCKS":const n={...e.blocks,...t.blocks};return u(n),{...e,blocks:n};case"ADD_TO_QUEUE":return{...e,queue:{...e.queue,[t.hash]:t.block}};case"REMOVE_FROM_QUEUE":return{...e,queue:Object.keys(e.queue).filter(e=>!t.hashes.includes(e)).map(t=>e.queue[t])}}return e},actions:h,selectors:{isRequesting:(e,t,n)=>void 0===t||void 0===n?e.isRequesting:e.isRequesting&&void 0!==e.queue[b(t,n)],isInQueue:(e,t,n)=>void 0!==e.queue[b(t,n)],getQueueMap:e=>e.queue,getQueue:e=>Object.values(e.queue),getBlocks:e=>e.blocks,getBlock:(e,t,n)=>e.blocks[b(t,n)]},controls:{SSR_FETCH:e=>o()({path:e.path,data:e.data,method:"POST"})}});Object(c.register)(g)},function(e,t,n){var r=n(6)(n(4),"Map");e.exports=r},function(e,t,n){var r=n(4).Symbol;e.exports=r},function(e,t,n){var r=n(37),o=n(92),c=n(41);e.exports=function(e){return c(e)?r(e):o(e)}},function(e,t){var n=Array.isArray;e.exports=n},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,n){(function(e){var r=n(33),o=t&&!t.nodeType&&t,c=o&&"object"==typeof e&&e&&!e.nodeType&&e,i=c&&c.exports===o&&r.process,a=function(){try{return c&&c.require&&c.require("util").types||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=a}).call(this,n(22)(e))},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t,n){var r=n(37),o=n(95),c=n(41);e.exports=function(e){return c(e)?r(e,!0):o(e)}},function(e,t,n){var r=n(100),o=n(42),c=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(e){return null==e?[]:(e=Object(e),r(i(e),(function(t){return c.call(e,t)})))}:o;e.exports=a},function(e,t,n){var r=n(104),o=n(18),c=n(105),i=n(106),a=n(107),u=n(13),s=n(34),l=s(r),f=s(o),p=s(c),d=s(i),b=s(a),v=u;(r&&"[object DataView]"!=v(new r(new ArrayBuffer(1)))||o&&"[object Map]"!=v(new o)||c&&"[object Promise]"!=v(c.resolve())||i&&"[object Set]"!=v(new i)||a&&"[object WeakMap]"!=v(new a))&&(v=function(e){var t=u(e),n="[object Object]"==t?e.constructor:void 0,r=n?s(n):"";if(r)switch(r){case l:return"[object DataView]";case f:return"[object Map]";case p:return"[object Promise]";case d:return"[object Set]";case b:return"[object WeakMap]"}return t}),e.exports=v},function(e,t,n){var r=n(110);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},function(e,t,n){"use strict";n.r(t),n.d(t,"getBlockContext",(function(){return o}));const r={},o=()=>((e,t="")=>(void 0===r[e]&&(r[e]=React.createContext(t)),r[e]))("block")},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){var r=n(13),o=n(7);e.exports=function(e){if(!o(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(63))},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t,n){var r=n(36),o=n(31),c=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var i=e[t];c.call(e,t)&&o(i,n)&&(void 0!==n||t in e)||r(e,t,n)}},function(e,t,n){var r=n(83);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t,n){var r=n(85),o=n(86),c=n(21),i=n(38),a=n(89),u=n(90),s=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=c(e),l=!n&&o(e),f=!n&&!l&&i(e),p=!n&&!l&&!f&&u(e),d=n||l||f||p,b=d?r(e.length,String):[],v=b.length;for(var y in e)!t&&!s.call(e,y)||d&&("length"==y||f&&("offset"==y||"parent"==y)||p&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||a(y,v))||b.push(y);return b}},function(e,t,n){(function(e){var r=n(4),o=n(88),c=t&&!t.nodeType&&t,i=c&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===c?r.Buffer:void 0,u=(a?a.isBuffer:void 0)||o;e.exports=u}).call(this,n(22)(e))},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){var r=n(32),o=n(39);e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},function(e,t){e.exports=function(){return[]}},function(e,t,n){var r=n(44),o=n(45),c=n(27),i=n(42),a=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,c(e)),e=o(e);return t}:i;e.exports=a},function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}},function(e,t,n){var r=n(40)(Object.getPrototypeOf,Object);e.exports=r},function(e,t,n){var r=n(44),o=n(21);e.exports=function(e,t,n){var c=t(e);return o(e)?c:r(c,n(e))}},function(e,t){e.exports=window.wp.blocks},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,n.apply(this,arguments)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(50);e.exports=function(e){return r(e,5)}},function(e,t,n){var r=n(51),o=n(82),c=n(35),i=n(84),a=n(94),u=n(97),s=n(98),l=n(99),f=n(101),p=n(102),d=n(103),b=n(28),v=n(108),y=n(109),h=n(115),m=n(21),g=n(38),j=n(117),O=n(7),_=n(119),x=n(20),w=n(26),E={};E["[object Arguments]"]=E["[object Array]"]=E["[object ArrayBuffer]"]=E["[object DataView]"]=E["[object Boolean]"]=E["[object Date]"]=E["[object Float32Array]"]=E["[object Float64Array]"]=E["[object Int8Array]"]=E["[object Int16Array]"]=E["[object Int32Array]"]=E["[object Map]"]=E["[object Number]"]=E["[object Object]"]=E["[object RegExp]"]=E["[object Set]"]=E["[object String]"]=E["[object Symbol]"]=E["[object Uint8Array]"]=E["[object Uint8ClampedArray]"]=E["[object Uint16Array]"]=E["[object Uint32Array]"]=!0,E["[object Error]"]=E["[object Function]"]=E["[object WeakMap]"]=!1,e.exports=function e(t,n,k,S,C,T){var A,R=1&n,I=2&n,N=4&n;if(k&&(A=C?k(t,S,C,T):k(t)),void 0!==A)return A;if(!O(t))return t;var P=m(t);if(P){if(A=v(t),!R)return s(t,A)}else{var D=b(t),B="[object Function]"==D||"[object GeneratorFunction]"==D;if(g(t))return u(t,R);if("[object Object]"==D||"[object Arguments]"==D||B&&!C){if(A=I||B?{}:h(t),!R)return I?f(t,a(A,t)):l(t,i(A,t))}else{if(!E[D])return C?t:{};A=y(t,D,R)}}T||(T=new r);var M=T.get(t);if(M)return M;T.set(t,A),_(t)?t.forEach((function(r){A.add(e(r,n,k,r,t,T))})):j(t)&&t.forEach((function(r,o){A.set(o,e(r,n,k,o,t,T))}));var F=P?void 0:(N?I?d:p:I?w:x)(t);return o(F||t,(function(r,o){F&&(r=t[o=r]),c(A,o,e(r,n,k,o,t,T))})),A}},function(e,t,n){var r=n(11),o=n(57),c=n(58),i=n(59),a=n(60),u=n(61);function s(e){var t=this.__data__=new r(e);this.size=t.size}s.prototype.clear=o,s.prototype.delete=c,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,e.exports=s},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var r=n(12),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():o.call(t,n,1),--this.size,0))}},function(e,t,n){var r=n(12);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var r=n(12);e.exports=function(e){return r(this.__data__,e)>-1}},function(e,t,n){var r=n(12);e.exports=function(e,t){var n=this.__data__,o=r(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},function(e,t,n){var r=n(11);e.exports=function(){this.__data__=new r,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(11),o=n(18),c=n(69);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var i=n.__data__;if(!o||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new c(i)}return n.set(e,t),this.size=n.size,this}},function(e,t,n){var r=n(32),o=n(66),c=n(7),i=n(34),a=/^\[object .+?Constructor\]$/,u=Function.prototype,s=Object.prototype,l=u.toString,f=s.hasOwnProperty,p=RegExp("^"+l.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!c(e)||o(e))&&(r(e)?p:a).test(i(e))}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(19),o=Object.prototype,c=o.hasOwnProperty,i=o.toString,a=r?r.toStringTag:void 0;e.exports=function(e){var t=c.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(e){}var o=i.call(e);return r&&(t?e[a]=n:delete e[a]),o}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var r,o=n(67),c=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!c&&c in e}},function(e,t,n){var r=n(4)["__core-js_shared__"];e.exports=r},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,n){var r=n(70),o=n(77),c=n(79),i=n(80),a=n(81);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=c,u.prototype.has=i,u.prototype.set=a,e.exports=u},function(e,t,n){var r=n(71),o=n(11),c=n(18);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(c||o),string:new r}}},function(e,t,n){var r=n(72),o=n(73),c=n(74),i=n(75),a=n(76);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=c,u.prototype.has=i,u.prototype.set=a,e.exports=u},function(e,t,n){var r=n(14);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,n){var r=n(14),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(t,e)?t[e]:void 0}},function(e,t,n){var r=n(14),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:o.call(t,e)}},function(e,t,n){var r=n(14);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},function(e,t,n){var r=n(15);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,n){var r=n(15);e.exports=function(e){return r(this,e).get(e)}},function(e,t,n){var r=n(15);e.exports=function(e){return r(this,e).has(e)}},function(e,t,n){var r=n(15);e.exports=function(e,t){var n=r(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},function(e,t,n){var r=n(6),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t,n){var r=n(16),o=n(20);e.exports=function(e,t){return e&&r(t,o(t),e)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t,n){var r=n(87),o=n(8),c=Object.prototype,i=c.hasOwnProperty,a=c.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return o(e)&&i.call(e,"callee")&&!a.call(e,"callee")};e.exports=u},function(e,t,n){var r=n(13),o=n(8);e.exports=function(e){return o(e)&&"[object Arguments]"==r(e)}},function(e,t){e.exports=function(){return!1}},function(e,t){var n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&n.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,n){var r=n(91),o=n(23),c=n(24),i=c&&c.isTypedArray,a=i?o(i):r;e.exports=a},function(e,t,n){var r=n(13),o=n(39),c=n(8),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,e.exports=function(e){return c(e)&&o(e.length)&&!!i[r(e)]}},function(e,t,n){var r=n(25),o=n(93),c=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=[];for(var n in Object(e))c.call(e,n)&&"constructor"!=n&&t.push(n);return t}},function(e,t,n){var r=n(40)(Object.keys,Object);e.exports=r},function(e,t,n){var r=n(16),o=n(26);e.exports=function(e,t){return e&&r(t,o(t),e)}},function(e,t,n){var r=n(7),o=n(25),c=n(96),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return c(e);var t=o(e),n=[];for(var a in e)("constructor"!=a||!t&&i.call(e,a))&&n.push(a);return n}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,t,n){(function(e){var r=n(4),o=t&&!t.nodeType&&t,c=o&&"object"==typeof e&&e&&!e.nodeType&&e,i=c&&c.exports===o?r.Buffer:void 0,a=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=a?a(n):new e.constructor(n);return e.copy(r),r}}).call(this,n(22)(e))},function(e,t){e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},function(e,t,n){var r=n(16),o=n(27);e.exports=function(e,t){return r(e,o(e),t)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,c=[];++n<r;){var i=e[n];t(i,n,e)&&(c[o++]=i)}return c}},function(e,t,n){var r=n(16),o=n(43);e.exports=function(e,t){return r(e,o(e),t)}},function(e,t,n){var r=n(46),o=n(27),c=n(20);e.exports=function(e){return r(e,c,o)}},function(e,t,n){var r=n(46),o=n(43),c=n(26);e.exports=function(e){return r(e,c,o)}},function(e,t,n){var r=n(6)(n(4),"DataView");e.exports=r},function(e,t,n){var r=n(6)(n(4),"Promise");e.exports=r},function(e,t,n){var r=n(6)(n(4),"Set");e.exports=r},function(e,t,n){var r=n(6)(n(4),"WeakMap");e.exports=r},function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&n.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},function(e,t,n){var r=n(29),o=n(111),c=n(112),i=n(113),a=n(114);e.exports=function(e,t,n){var u=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new u(+e);case"[object DataView]":return o(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return a(e,n);case"[object Map]":return new u;case"[object Number]":case"[object String]":return new u(e);case"[object RegExp]":return c(e);case"[object Set]":return new u;case"[object Symbol]":return i(e)}}},function(e,t,n){var r=n(4).Uint8Array;e.exports=r},function(e,t,n){var r=n(29);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},function(e,t){var n=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}},function(e,t,n){var r=n(19),o=r?r.prototype:void 0,c=o?o.valueOf:void 0;e.exports=function(e){return c?Object(c.call(e)):{}}},function(e,t,n){var r=n(29);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},function(e,t,n){var r=n(116),o=n(45),c=n(25);e.exports=function(e){return"function"!=typeof e.constructor||c(e)?{}:r(o(e))}},function(e,t,n){var r=n(7),o=Object.create,c=function(){function e(){}return function(t){if(!r(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=c},function(e,t,n){var r=n(118),o=n(23),c=n(24),i=c&&c.isMap,a=i?o(i):r;e.exports=a},function(e,t,n){var r=n(28),o=n(8);e.exports=function(e){return o(e)&&"[object Map]"==r(e)}},function(e,t,n){var r=n(120),o=n(23),c=n(24),i=c&&c.isSet,a=i?o(i):r;e.exports=a},function(e,t,n){var r=n(28),o=n(8);e.exports=function(e){return o(e)&&"[object Set]"==r(e)}},function(e,t,n){const{select:r,dispatch:o}=n(3),{STORE_NAME:c}=n(17);setInterval(()=>{const e=r(c);e.isRequesting()||e.getQueue().length<1||o(c).fetchSSR(r("core/editor").getCurrentPostId())},300)},function(e,t,n){"use strict";n.r(t);var r=n(5),o=n.n(r),c=n(0),i=n(47),a=n(9),u=n(1);const s=e=>"string"==typeof e?BlockX.i18n[e]:BlockX.i18n,l=()=>s("widget_tax_query"),f=()=>s("widget_media");var p=n(48),d=n.n(p),b=n(2),v=Object.prototype.hasOwnProperty,y=new WeakMap,h=0,m=function(){function e(e){void 0===e&&(e={}),this.cache=new Map(Object.entries(e)),this.subs=[]}return e.prototype.get=function(e){var t=this.serializeKey(e)[0];return this.cache.get(t)},e.prototype.set=function(e,t){var n=this.serializeKey(e)[0];this.cache.set(n,t),this.notify()},e.prototype.keys=function(){return Array.from(this.cache.keys())},e.prototype.has=function(e){var t=this.serializeKey(e)[0];return this.cache.has(t)},e.prototype.clear=function(){this.cache.clear(),this.notify()},e.prototype.delete=function(e){var t=this.serializeKey(e)[0];this.cache.delete(t),this.notify()},e.prototype.serializeKey=function(e){var t=null;if("function"==typeof e)try{e=e()}catch(t){e=""}return Array.isArray(e)?(t=e,e=function(e){if(!e.length)return"";for(var t="arg",n=0;n<e.length;++n)if(null!==e[n]){var r=void 0;"object"!=typeof e[n]&&"function"!=typeof e[n]?r="string"==typeof e[n]?'"'+e[n]+'"':String(e[n]):y.has(e[n])?r=y.get(e[n]):(r=h,y.set(e[n],h++)),t+="@"+r}else t+="@null";return t}(e)):e=String(e||""),[e,t,e?"err@"+e:"",e?"validating@"+e:""]},e.prototype.subscribe=function(e){var t=this;if("function"!=typeof e)throw new Error("Expected the listener to be a function.");var n=!0;return this.subs.push(e),function(){if(n){n=!1;var r=t.subs.indexOf(e);r>-1&&(t.subs[r]=t.subs[t.subs.length-1],t.subs.length--)}}},e.prototype.notify=function(){for(var e=0,t=this.subs;e<t.length;e++)(0,t[e])()},e}(),g=!0,j={isOnline:function(){return g},isDocumentVisible:function(){return"undefined"==typeof document||void 0===document.visibilityState||"hidden"!==document.visibilityState},fetcher:function(e){return fetch(e).then((function(e){return e.json()}))},registerOnFocus:function(e){"undefined"!=typeof window&&void 0!==window.addEventListener&&"undefined"!=typeof document&&void 0!==document.addEventListener&&(document.addEventListener("visibilitychange",(function(){return e()}),!1),window.addEventListener("focus",(function(){return e()}),!1))},registerOnReconnect:function(e){"undefined"!=typeof window&&void 0!==window.addEventListener&&(window.addEventListener("online",(function(){g=!0,e()}),!1),window.addEventListener("offline",(function(){return g=!1}),!1))}},O=function(){return(O=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},_=new m,x="undefined"!=typeof window&&navigator.connection&&-1!==["slow-2g","2g"].indexOf(navigator.connection.effectiveType),w=O({onLoadingSlow:function(){},onSuccess:function(){},onError:function(){},onErrorRetry:function(e,__,t,n,r){if(t.isDocumentVisible()&&!("number"==typeof t.errorRetryCount&&r.retryCount>t.errorRetryCount)){var o=Math.min(r.retryCount,8),c=~~((Math.random()+.5)*(1<<o))*t.errorRetryInterval;setTimeout(n,c,r)}},errorRetryInterval:1e3*(x?10:5),focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:1e3*(x?5:3),refreshInterval:0,revalidateOnFocus:!0,revalidateOnReconnect:!0,refreshWhenHidden:!1,refreshWhenOffline:!1,shouldRetryOnError:!0,suspense:!1,compare:function e(t,n){var r,o;if(t===n)return!0;if(t&&n&&(r=t.constructor)===n.constructor){if(r===Date)return t.getTime()===n.getTime();if(r===RegExp)return t.toString()===n.toString();if(r===Array){if((o=t.length)===n.length)for(;o--&&e(t[o],n[o]););return-1===o}if(!r||"object"==typeof t){for(r in o=0,t){if(v.call(t,r)&&++o&&!v.call(n,r))return!1;if(!(r in n)||!e(t[r],n[r]))return!1}return Object.keys(n).length===o}}return t!=t&&n!=n},isPaused:function(){return!1}},j),E="undefined"==typeof window||!!("undefined"!=typeof Deno&&Deno&&Deno.version&&Deno.version.deno),k=E?null:window.requestAnimationFrame?function(e){return window.requestAnimationFrame(e)}:function(e){return setTimeout(e,1)},S=E?b.useEffect:b.useLayoutEffect,C=Object(b.createContext)({});C.displayName="SWRConfigContext";var T,A=C,R=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function i(e){try{u(r.next(e))}catch(e){c(e)}}function a(e){try{u(r.throw(e))}catch(e){c(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}u((r=r.apply(e,t||[])).next())}))},I=function(e,t){var n,r,o,c,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return c={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function a(c){return function(a){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,a])}}},N={},P={},D={},B={},M={},F={},L={},U=(T=0,function(){return++T});if(!E){var V=function(e){if(w.isDocumentVisible()&&w.isOnline())for(var t in e)e[t][0]&&e[t][0]()};"function"==typeof w.registerOnFocus&&w.registerOnFocus((function(){return V(D)})),"function"==typeof w.registerOnReconnect&&w.registerOnReconnect((function(){return V(B)}))}var z=function(e,t){void 0===t&&(t=!0);var n=_.serializeKey(e),r=n[0],o=n[2],c=n[3];if(!r)return Promise.resolve();var i=M[r];if(r&&i){for(var a=_.get(r),u=_.get(o),s=_.get(c),l=[],f=0;f<i.length;++f)l.push(i[f](t,a,u,s,f>0));return Promise.all(l).then((function(){return _.get(r)}))}return Promise.resolve(_.get(r))},q=function(e,t,n,r){var o=M[e];if(e&&o)for(var c=0;c<o.length;++c)o[c](!1,t,n,r)},Q=function(e,t,n){return void 0===n&&(n=!0),R(void 0,void 0,void 0,(function(){var r,o,c,i,a,u,s,l,f,p,d,b,v;return I(this,(function(y){switch(y.label){case 0:if(r=_.serializeKey(e),o=r[0],c=r[2],!o)return[2];if(void 0===t)return[2,z(e,n)];if(F[o]=U()-1,L[o]=0,i=F[o],a=P[o],l=!1,t&&"function"==typeof t)try{t=t(_.get(o))}catch(e){t=void 0,s=e}if(!t||"function"!=typeof t.then)return[3,5];l=!0,y.label=1;case 1:return y.trys.push([1,3,,4]),[4,t];case 2:return u=y.sent(),[3,4];case 3:return f=y.sent(),s=f,[3,4];case 4:return[3,6];case 5:u=t,y.label=6;case 6:if((p=function(){if(i!==F[o]||a!==P[o]){if(s)throw s;return!0}})())return[2,u];if(void 0!==u&&_.set(o,u),_.set(c,s),L[o]=U()-1,!l&&p())return[2,u];if(d=M[o]){for(b=[],v=0;v<d.length;++v)b.push(d[v](!!n,u,s,void 0,v>0));return[2,Promise.all(b).then((function(){if(s)throw s;return _.get(o)}))]}if(s)throw s;return[2,u]}}))}))};Object.defineProperty(A.Provider,"default",{value:w}),A.Provider;var $=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0],o=Object.assign({},w,Object(b.useContext)(A),t.length>2?t[2]:2===t.length&&"object"==typeof t[1]?t[1]:{}),c=t.length>2||2===t.length&&"function"==typeof t[1]||null===t[1]?t[1]:o.fetcher,i=_.serializeKey(r),a=i[0],u=i[1],s=i[2],l=i[3],f=Object(b.useRef)(o);S((function(){f.current=o}));var p=function(){return o.revalidateOnMount||!o.initialData&&void 0===o.revalidateOnMount},d=function(){var e=_.get(a);return void 0===e?o.initialData:e},v=function(){return!!_.get(l)||a&&p()},y=d(),h=_.get(s),m=v(),g=Object(b.useRef)({data:!1,error:!1,isValidating:!1}),j=Object(b.useRef)({data:y,error:h,isValidating:m});Object(b.useDebugValue)(j.current.data);var O,x,C=Object(b.useState)({})[1],T=Object(b.useCallback)((function(e){var t=!1;for(var n in e)j.current[n]!==e[n]&&(j.current[n]=e[n],g.current[n]&&(t=!0));if(t){if(V.current||!$.current)return;C({})}}),[]),V=Object(b.useRef)(!1),z=Object(b.useRef)(a),$=Object(b.useRef)(!1),W=Object(b.useCallback)((function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];V.current||$.current&&a===z.current&&(t=f.current)[e].apply(t,n)}),[a]),K=Object(b.useCallback)((function(e,t){return Q(z.current,e,t)}),[]),J=function(e,t){return e[a]?e[a].push(t):e[a]=[t],function(){var n=e[a],r=n.indexOf(t);r>=0&&(n[r]=n[n.length-1],n.pop())}},X=Object(b.useCallback)((function(t){return void 0===t&&(t={}),R(e,void 0,void 0,(function(){var e,n,r,i,p,d,b,v,y,h;return I(this,(function(m){switch(m.label){case 0:if(!a||!c)return[2,!1];if(V.current)return[2,!1];if(f.current.isPaused())return[2,!1];e=t.retryCount,n=void 0===e?0:e,r=t.dedupe,i=void 0!==r&&r,p=!0,d=void 0!==N[a]&&i,m.label=1;case 1:return m.trys.push([1,6,,7]),T({isValidating:!0}),_.set(l,!0),d||q(a,j.current.data,j.current.error,!0),b=void 0,v=void 0,d?(v=P[a],[4,N[a]]):[3,3];case 2:return b=m.sent(),[3,5];case 3:return o.loadingTimeout&&!_.get(a)&&setTimeout((function(){p&&W("onLoadingSlow",a,o)}),o.loadingTimeout),N[a]=null!==u?c.apply(void 0,u):c(a),P[a]=v=U(),[4,N[a]];case 4:b=m.sent(),setTimeout((function(){delete N[a],delete P[a]}),o.dedupingInterval),W("onSuccess",b,a,o),m.label=5;case 5:return P[a]>v?[2,!1]:F[a]&&(v<=F[a]||v<=L[a]||0===L[a])?(T({isValidating:!1}),[2,!1]):(_.set(s,void 0),_.set(l,!1),y={isValidating:!1},void 0!==j.current.error&&(y.error=void 0),o.compare(j.current.data,b)||(y.data=b),o.compare(_.get(a),b)||_.set(a,b),T(y),d||q(a,b,y.error,!1),[3,7]);case 6:return h=m.sent(),delete N[a],delete P[a],f.current.isPaused()?(T({isValidating:!1}),[2,!1]):(_.set(s,h),j.current.error!==h&&(T({isValidating:!1,error:h}),d||q(a,void 0,h,!1)),W("onError",h,a,o),o.shouldRetryOnError&&W("onErrorRetry",h,a,o,X,{retryCount:n+1,dedupe:!0}),[3,7]);case 7:return p=!1,[2,!0]}}))}))}),[a]);if(S((function(){if(a){V.current=!1;var e=$.current;$.current=!0;var t=j.current.data,n=d();z.current=a,o.compare(t,n)||T({data:n});var r=function(){return X({dedupe:!0})};(e||p())&&(void 0===n||E?r():k(r));var c=!1,i=J(D,(function(){!c&&f.current.revalidateOnFocus&&(c=!0,r(),setTimeout((function(){return c=!1}),f.current.focusThrottleInterval))})),u=J(B,(function(){f.current.revalidateOnReconnect&&r()})),s=J(M,(function(e,t,n,c,i){void 0===e&&(e=!0),void 0===i&&(i=!0);var a={},u=!1;return void 0===t||o.compare(j.current.data,t)||(a.data=t,u=!0),j.current.error!==n&&(a.error=n,u=!0),void 0!==c&&j.current.isValidating!==c&&(a.isValidating=c,u=!0),u&&T(a),!!e&&(i?r():X())}));return function(){T=function(){return null},V.current=!0,i(),u(),s()}}}),[a,X]),S((function(){var t=null,n=function(){return R(e,void 0,void 0,(function(){return I(this,(function(e){switch(e.label){case 0:return j.current.error||!f.current.refreshWhenHidden&&!f.current.isDocumentVisible()||!f.current.refreshWhenOffline&&!f.current.isOnline()?[3,2]:[4,X({dedupe:!0})];case 1:e.sent(),e.label=2;case 2:return f.current.refreshInterval&&t&&(t=setTimeout(n,f.current.refreshInterval)),[2]}}))}))};return f.current.refreshInterval&&(t=setTimeout(n,f.current.refreshInterval)),function(){t&&(clearTimeout(t),t=null)}}),[o.refreshInterval,o.refreshWhenHidden,o.refreshWhenOffline,X]),o.suspense){if(O=_.get(a),x=_.get(s),void 0===O&&(O=y),void 0===x&&(x=h),void 0===O&&void 0===x){if(N[a]||X(),N[a]&&"function"==typeof N[a].then)throw N[a];O=N[a]}if(void 0===O&&x)throw x}var H=Object(b.useMemo)((function(){var e={revalidate:X,mutate:K};return Object.defineProperties(e,{error:{get:function(){return g.current.error=!0,o.suspense?x:z.current===a?j.current.error:h},enumerable:!0},data:{get:function(){return g.current.data=!0,o.suspense?O:z.current===a?j.current.data:y},enumerable:!0},isValidating:{get:function(){return g.current.isValidating=!0,!!a&&j.current.isValidating},enumerable:!0}}),e}),[X,y,h,K,a,o.suspense,x,O]);return H},W=n(30);const K=()=>Object(b.useContext)(Object(W.getBlockContext)()),J={},X=async e=>{const t=J[e];if(typeof t==typeof{}&&void 0!==t.post_title)return t;const n=await o()({path:"/blockx/v1/get/"+e});return typeof n==typeof{}&&n.ID&&(J[e]={...J[e]||{},...n}),n},H={},G=({ID:e,post_title:t,onClick:n})=>Object(c.createElement)("div",{className:"blockx-post",onClick:n},t,Object(c.createElement)("br",null),Object(c.createElement)("i",{className:"description"},"ID: ",e)),Y=({label:e,post_types:t,post_status:n,use_context:r,onFound:i})=>{const[a,s]=Object(c.useState)(""),[l,f]=Object(c.useState)(!1),{posts:p,isLoading:b}=((e,t,n,r)=>{const{blockId:i,dirtyState:a}=K(),u=((e,t,n,r)=>({s:e,post_type:t.join(","),post_status:n.join(","),block_instance:r}))(((e,t)=>{const[n,r]=Object(c.useState)(e);return Object(c.useEffect)(()=>{const t=setTimeout(()=>{r(e)},600);return()=>{clearTimeout(t)}},[e,600]),n})(e),t,n,{...r?{blockId:i,content:a}:{blockId:i}}),s=JSON.stringify(u),{data:l,error:f}=$(s,(e=>async()=>{if(0===e.length)return[];const t=JSON.stringify(e);if(typeof H[t]==typeof[])return H[t];const n=await o()({method:"POST",path:"/blockx/v1/query",data:e});H[t]=n;for(const e of n)J[e.ID]=e;return n})(u));return{posts:l||[],isLoading:!f&&!l}})(a,t,n,r);return((e,t=[],n=!0)=>{Object(c.useEffect)(()=>{if(!n)return;const t=({key:t})=>{"Escape"===t&&e()};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}},t)})(()=>{f(!1)},[l],l),Object(c.createElement)(u.BaseControl,{className:"blockx--search-post"},Object(c.createElement)("div",{className:"blockx--search-posts__input-wrapper"},Object(c.createElement)(u.TextControl,{label:e,value:a,onChange:e=>{f(!0),s(e)},onFocus:()=>f(!0)}),b&&Object(c.createElement)("span",{className:"blockx--search-post__spinner-wrapper"},Object(c.createElement)(u.Spinner,null))),l?Object(c.createElement)(u.Popover,{focusOnMount:!1,position:"bottom center"},Object(c.createElement)("div",{className:"blockx--search-post__popover"},p.length>0?p.map(e=>Object(c.createElement)(G,d()({key:e.ID},e,{onClick:()=>i(e.ID)}))):Object(c.createElement)("p",{className:"blockx--search-post__no-results"},b?"Searching...":"No posts found."))):null)},Z=({label:e,post_id:t,onUnlock:n})=>{const{post:r}=(e=>{const{data:t,error:n}=$(e,X);return{post:t||{},isLoading:!n&&!t}})(t),{post_title:o=t}=r;return Object(c.createElement)(u.BaseControl,{className:"blockx--locked-post"},Object(c.createElement)(u.TextControl,{label:e,value:o,readOnly:!0}),Object(c.createElement)("span",{className:"blockx--locked-post__icon",onClick:n},Object(c.createElement)(u.Icon,{icon:"no"})))};var ee=n(3);const te=(e,t)=>({value:e,label:t}),ne=(e,t,n)=>{const r=Object(ee.useSelect)(n=>n("core/data").isResolving("core","getEntityRecords",["taxonomy",e,t]),[e,...n]),[o,i]=Object(c.useState)([]);return Object(c.useEffect)(()=>{i(Object(ee.select)("core").getEntityRecords("taxonomy",e,t)||[])},[r,e,...n]),{terms:o,isResolving:r}},re=(e,t,n=25)=>ne(e,{per_page:n,search:t},[t,n]),oe=(e,t)=>((e,t)=>t.find(t=>t.id===e))(e,t)||((e,t)=>t.find(t=>t.slug===e))(e,t)||((e,t)=>t.find(t=>t.name===e))(e,t),ce=({taxonomies:e,value:t,onChange:n})=>{const{taxonomy:r=e[0],termIds:o=[],operator:i="OR"}=t,{label_taxonomy:a,label_add_terms:s,label_operator:f}=l(),[p,d]=Object(c.useState)(""),[b,v]=Object(c.useState)(""),{terms:y,isResolving:h}=re(r,b),{terms:m,isResolving:g}=((e,t)=>ne(e,{include:t},[t.join(",")]))(r,o);Object(c.useEffect)(()=>{e.map(e=>e.value).includes(r)||n({...t,taxonomy:e[0].value})},[r,e]),Object(c.useEffect)(()=>{let e=setTimeout(()=>{v(p)},600);return()=>clearTimeout(e)},[o,p]);const j=["blockx--tax-query"];return h&&j.push("is-resolving-search"),g&&j.push("is-resolving-selection"),Object(c.createElement)("div",{className:j.join(" ")},Object(c.createElement)("div",null,Object(c.createElement)(u.SelectControl,{label:a,options:e,value:r,onChange:e=>n({...t,taxonomy:e})})),Object(c.createElement)("div",null,Object(c.createElement)(u.FormTokenField,{label:s,value:o.map(e=>{const t=oe(e,m);return t?t.name:e}),onInputChange:e=>{d(e)},suggestions:y.map(e=>e.name),onChange:e=>{const r=e.map(e=>{const t="string"==typeof e?e:e.value,n=oe(t,y)||oe(t,m);return n?n.id:t});n({...t,termIds:r})}})),Object(c.createElement)("div",null,Object(c.createElement)(u.SelectControl,{label:f,value:i,options:["IN","NOT IN","AND"].map(e=>te(e,e)),onChange:e=>{n({...t,operator:e})}})))},ie=({children:e})=>Object(c.createElement)("div",{style:{background:"rgba(0, 0, 0, 0.02)",padding:8,border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:4,marginBottom:5,marginLeft:-10,marginRight:-10}},e),ae=({taxonomies:e,value:t,onChange:n})=>{const{toggle_AND_description:r,toggle_OR_description:o,btn_add_taxonomy:i,btn_delete_taxonomy:a}=l(),{taxonomies:s=[],relation:f="OR"}=t,p=e=>n(e.taxonomies.length>=1?e:void 0);return Object(c.createElement)("div",null,Object(c.createElement)("div",null,s.map((n,r)=>Object(c.createElement)(ie,{key:r},Object(c.createElement)(ce,{taxonomies:e,value:n,onChange:e=>{p({...t,taxonomies:s.map((t,n)=>r===n?e:t)})}}),Object(c.createElement)(u.Button,{isDestructive:!0,isSmall:!0,onClick:()=>{p({...t,taxonomies:s.map((e,t)=>t===r?null:e).filter(e=>null!=e)})}},a))),s.length>1?Object(c.createElement)("div",{style:{marginTop:10}},Object(c.createElement)(u.ToggleControl,{label:f,help:"AND"===f?r:o,checked:"AND"===f,onChange:e=>{p({...t,relation:e?"AND":"OR"})}})):null),Object(c.createElement)(u.Button,{isSecondary:!0,isSmall:!0,onClick:()=>{p({relation:f,taxonomies:[...s,{}]})},style:{width:"100%",textAlign:"center",display:"inline-block"}},i))};var ue=({definition:e,value:t,onChange:n})=>"number"!=typeof e.rows||1===e.rows?Object(c.createElement)(u.TextControl,{label:e.label,value:t,onChange:n,help:e.help}):Object(c.createElement)(u.TextareaControl,{label:e.label,value:t,onChange:n,rows:e.rows,help:e.help});const se=(e,t)=>typeof e==typeof{}?t?e.on:e.off:"string"==typeof e?e:null;const le={},fe=async e=>{if("string"==typeof e&&0===e.length)return null;if("number"==typeof e&&e<=0)return null;const t=le[e];if(typeof t==typeof{}&&void 0!==t.type)return t;const n=await o()({path:"/wp/v2/media/"+e});return typeof n==typeof{}&&n.id===e&&(t[e]={...t[e]||{},...n}),n},pe=({children:e,type:t="any",isLoading:n=!1})=>{const r=n?"blockx-media-widget__preview--is-loading":"";return Object(c.createElement)("div",{className:`blockx-media-widget__preview--item blockx-media-widget__preview--${t} ${r}`},e)},de=({ID:e})=>{var t;const{not_found:n}=f(),{media:r,isLoading:o}=(e=>{const{data:t,error:n}=$(e,fe);return{media:t||{},isLoading:!n&&!t}})(e);if(o)return Object(c.createElement)(pe,{isLoading:!0},Object(c.createElement)("span",{className:"spinner is-active"}));var i,a,u;if("image"===(null==r?void 0:r.media_type))return null!=r&&null!==(i=r.media_details)&&void 0!==i&&null!==(a=i.sizes)&&void 0!==a&&null!==(u=a.thumbnail)&&void 0!==u&&u.source_url?Object(c.createElement)(pe,{type:"image"},Object(c.createElement)("img",{src:r.media_details.sizes.thumbnail.source_url})):Object(c.createElement)("span",{className:"blockx-media-widget__404"},n);if(null==r||!r.source_url)return Object(c.createElement)("span",{className:"blockx-media-widget__404"},n);const s=null!=r&&null!==(t=r.title)&&void 0!==t&&t.rendered?r.title.rendered:r.source_url;return Object(c.createElement)(pe,null,Object(c.createElement)("p",null,Object(c.createElement)("a",{href:r.source_url,target:"_blank"},s)))};var be=n(49),ve=n.n(be),ye={text:ue,textarea:e=>Object(c.createElement)(ue,e),number:({definition:e,value:t,onChange:n})=>Object(c.createElement)(u.TextControl,{label:e.label,value:t,onChange:n,type:"number"}),toggle:({definition:e,value:t,onChange:n})=>{const{label:r,help:o}=e;return Object(c.createElement)(u.ToggleControl,{label:se(r,t),help:se(o,t),checked:t,onChange:n})},select:({definition:e,value:t,onChange:n})=>{const{label:r,options:o}=e;return Object(c.createElement)(u.SelectControl,{label:r,value:t,onChange:n,options:o,multiple:e.multiple})},taxonomy_term:({definition:e,value:t,onChange:n})=>{const{label:r,taxonomy:o}=e,i=(e=>{const{terms:t}=re(e,"",-1),{term_select_any:n}=s();return[te("",n),...t.map(({name:e,id:t})=>te(t,e))]})(o);return Object(c.createElement)(u.SelectControl,{label:r,value:t,onChange:n,options:i})},tax_query:({definition:e,value:t,onChange:n})=>Object(c.createElement)(u.BaseControl,{label:e.label},Object(c.createElement)(ae,{taxonomies:e.taxonomies,value:t,onChange:n})),post:({definition:e,value:t,onChange:n,instance:r})=>t?Object(c.createElement)(Z,{label:e.label,post_id:t,onUnlock:()=>n("")}):Object(c.createElement)(Y,{label:e.label,post_types:e.post_types,post_status:e.post_status,use_context:e.use_context,instance:r,onFound:n}),hidden:()=>null,divider:()=>Object(c.createElement)("hr",null),readonly:({definition:e,value:t})=>Object(c.createElement)(u.TextControl,{label:e.label,type:"text",readOnly:!0,value:t}),media:({definition:e,value:t,onChange:n})=>{const{label:r,mediaTypes:o,multiple:i,mediaUploadTitle:s}=e,{no_permission:l}=f();return Object(c.createElement)("div",{className:"blockx-media-widget "+(i?"blockx-media-widget__multiple":"")},Object(c.createElement)(a.MediaUploadCheck,{fallback:Object(c.createElement)("p",null,"$",l)},Object(c.createElement)("div",{className:"blockx-media-widget__control"},Object(c.createElement)(a.MediaUpload,{title:s.length>0?s:void 0,allowedTypes:o.length>0?o:void 0,multiple:i,gallery:!1,value:t,onSelect:e=>{Array.isArray(e)?n(e.map(e=>e.id)):n(e.id)},render:({open:e})=>Object(c.createElement)(u.Button,{isSecondary:!0,onClick:()=>e()},r)})),Object(c.createElement)("div",{className:"blockx-media-widget__preview"},Array.isArray(t)?t.map(e=>Object(c.createElement)(de,{key:e,ID:e})):t?Object(c.createElement)(de,{ID:t}):null)))},list_of:({definition:e,value:t,onChange:n})=>{const r=(e,r)=>{n(t.map((n,o)=>o===e?{...t[r]}:o===r?{...t[e]}:n))};return Object(c.createElement)(u.BaseControl,{className:"blockx-list-of-widget",label:e.label},Object(c.createElement)("div",{className:"blockx-list-of-widget__body"},t.map((o,i)=>Object(c.createElement)("div",{className:"blockx-list-of-widget__item",key:i},Object(c.createElement)("div",{className:"blockx-list-of-widget__item--control blockx-list-of-widget__item--control-top"},Object(c.createElement)(u.Button,{icon:"arrow-up",isSecondary:!0,isSmall:!0,disabled:0===i,onClick:()=>(e=>r(e,e-1))(i)},"Up")),Object(c.createElement)(he,{items:e.contentStructure,value:o,onChange:(e,r)=>((e,r,o)=>{const c=ve()(t);c[e][r]=o,n(c)})(i,e,r)}),Object(c.createElement)("div",{className:"blockx-list-of-widget__item--control blockx-list-of-widget__item--control-bottom"},Object(c.createElement)(u.Button,{icon:"arrow-down",isSecondary:!0,isSmall:!0,disabled:i>=t.length-1,onClick:()=>(e=>r(e,e+1))(i)},"Down"),Object(c.createElement)(u.Button,{icon:"trash",isSecondary:!0,isSmall:!0,isDestructive:!0,disabled:0===t.length,onClick:()=>(e=>{n(t.filter((t,n)=>n!==e))})(i)},"Delete item"))))),Object(c.createElement)("div",{className:"blockx-list-of-widget__control"},Object(c.createElement)(u.Button,{icon:"plus",isSecondary:!0,isSmall:!0,onClick:()=>{const r={};e.contentStructure.forEach(t=>{r[t.key]=null==e?void 0:e.defaultValues[t.key]}),n([...t,r])}},"Add list item"),Object(c.createElement)(u.Button,{icon:"trash",isSecondary:!0,isSmall:!0,isDestructive:!0,disabled:0===t.length,onClick:()=>{n([])}},"Delete all items")))}},he=({items:e,value:t,onChange:n})=>e.map((e,r)=>{if(void 0!==ye[e.type]){const o=ye[e.type],i=void 0!==t[e.key]?t[e.key]:e.defaultValue;return Object(c.createElement)(o,{key:`${r}-${e.key}`,definition:e,value:i,onChange:t=>n(e.key,t)})}return Object(c.createElement)("p",{key:e.key},"Type ",Object(c.createElement)("b",null,e.type)," not implemented")}),me=({definition:e,content:t,setContent:n})=>{const{btn_apply_changes:r}=s(),{localChanges:o,changeLocalState:i}=K(),a=[];let l={label:void 0,opened:void 0,contentStructure:[]};for(const t of e)"panel"!==t.type?l.contentStructure.push(t):(a.push({...l}),a.push({label:t.label,opened:t.opened,contentStructure:t.contentStructure}),l.contentStructure=[]);return l.contentStructure.length>0&&a.push(l),Object(c.createElement)(c.Fragment,null,a.map((e,n)=>Object(c.createElement)(u.PanelBody,{key:n,title:e.label,initialOpen:e.opened},Object(c.createElement)(he,{items:e.contentStructure,value:{...t,...o},onChange:(e,t)=>{i(e,t)}}))),Object(c.createElement)(u.PanelBody,null,Object(c.createElement)(u.Button,{isSecondary:!0,disabled:0===Object.keys(o).length,onClick:()=>{n({...t,...o})}},r)))};const{getBlockContext:ge}=n(30);var je=({blockId:e,contentStructure:t,defaultValues:n,attributes:r,content:o,setContent:i,changeLocalState:a,localChanges:u,children:s})=>{const l=ge();return Object(c.createElement)(l.Provider,{value:{blockId:e,contentStructure:t,defaultValues:n,attributes:r,content:o,setContent:i,changeLocalState:a,localChanges:u,dirtyState:{...o,...u}}},s)},Oe=n(10),_e=n(17);const xe=(e,t=[])=>Object(ee.useSelect)(t=>e(t(_e.STORE_NAME)),t),we=({isLoading:e,children:t})=>Object(c.createElement)("div",{className:"blockx--ssr__wrapper"},t,e&&Object(c.createElement)("span",{className:"loader"},Object(c.createElement)(u.Spinner,null)));var Ee=({block:e,content:t,attributes:n})=>{void 0===n&&(console.warn("Using content attribute with ServerSideRenderQueue is deprecated. Please provide the complete attribute object of the block."),n={content:t});const r=((e,t)=>{const n=xe(n=>n.getBlock(e,t),[e,t]),r=Object(ee.useDispatch)(_e.STORE_NAME);return Object(c.useEffect)(()=>{r.addToQueue(e,t)},[e,JSON.stringify(t)]),n})(e,n),o=((e,t)=>xe(n=>n.isRequesting(e,t),[e,t]))(e,n),i=((e,t)=>xe(n=>n.isInQueue(e,t),[e,t]))(e,n),a=o||i;if(!1===r)return Object(c.createElement)(we,{isLoading:a},";",Object(c.createElement)(u.Placeholder,null,Object(Oe.sprintf)(Object(Oe.__)("Error loading block: %s"),e)));if(void 0===r){const e=Object(Oe.__)("Block rendered as empty.");return Object(c.createElement)(we,{isLoading:a},Object(c.createElement)(u.Placeholder,null,a?Object(Oe.__)("Loading"):e))}return Object(c.createElement)(we,{isLoading:a},Object(c.createElement)(c.RawHTML,{key:"html"},r))};const ke=(e,t)=>{const n=BlockX.settings.auto_save_timeout;Object(c.useEffect)(()=>{let r=null;return 0!==Object.keys(t).length&&n>100&&(r=setTimeout(()=>{e()},n)),()=>clearTimeout(r)},[JSON.stringify(t)])},Se=window.BlockXComponents={...window.BlockXComponents||{},ServerSideRenderQueue:Ee,useBlock:K};for(const{id:e,title:t,category:n,registerBlockTypeArgs:r,contentStructure:o}of BlockX.blocks){const u={};for(const{defaultValue:e,key:t,options:n}of o)void 0!==e?u[t]=e:typeof n==typeof[]&&n.length>0&&"string"==typeof n[0].value&&(u[t]=n[0].value);Object(i.registerBlockType)(e,{...r,title:t,category:n,attributes:{content:{type:"object",default:u}},edit:t=>{const{className:n,setAttributes:r,attributes:i}=t,[s,l]=Object(c.useState)({}),f=(e,t)=>{l(n=>({...s,[e]:t}))};ke(()=>{p({...i.content,...s})},s);const p=e=>{r({content:e}),l({})},d=Se[e]||Ee;return Object(c.createElement)(c.Fragment,null,Object(c.createElement)(a.InspectorControls,null,Object(c.createElement)(je,{blockId:e,contentStructure:o,defaultValues:u,attributes:i,content:i.content,setContent:p,changeLocalState:f,localChanges:s},Object(c.createElement)(me,{definition:o,content:i.content,setContent:p}))),Object(c.createElement)("div",{className:n},Object(c.createElement)(je,{blockId:e,contentStructure:o,defaultValues:u,attributes:i,content:i.content,setContent:p,changeLocalState:f,localChanges:s},Object(c.createElement)(d,{block:e,attributes:i,content:i.content}))))}})}n(121),o.a.use((e,t)=>(e.headers={...e.headers||{},"Block-X-Editor":!0},t(e)))}]);